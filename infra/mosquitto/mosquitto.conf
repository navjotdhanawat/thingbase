# Mosquitto MQTT Broker Configuration
# Security-hardened configuration for IoT SaaS Platform

# ============================================
# LISTENERS
# ============================================

# Standard MQTT listener
listener 1883
protocol mqtt

# WebSocket listener (for browser-based clients if needed)
listener 9001
protocol websockets

# ============================================
# AUTHENTICATION
# ============================================

# Disable anonymous connections (CRITICAL for security)
allow_anonymous false

# Password-based authentication
password_file /mosquitto/config/passwd

# Access Control List for topic-level permissions
acl_file /mosquitto/config/acl.conf

# ============================================
# PERSISTENCE
# ============================================

persistence true
persistence_location /mosquitto/data/

# ============================================
# LOGGING
# ============================================

log_dest file /mosquitto/log/mosquitto.log
log_dest stdout
log_type error
log_type warning
log_type notice
log_type information

# ============================================
# CONNECTION SETTINGS
# ============================================

# Unlimited connections (-1 = no limit)
max_connections -1

# Keep-alive settings
max_keepalive 300

